"use strict";(self.webpackChunkpollerdox=self.webpackChunkpollerdox||[]).push([[958],{5680:(e,n,r)=>{r.d(n,{xA:()=>p,yg:()=>y});var t=r(6540);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function i(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function l(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=t.createContext({}),u=function(e){var n=t.useContext(s),r=n;return e&&(r="function"==typeof e?e(n):i(i({},n),e)),r},p=function(e){var n=u(e.components);return t.createElement(s.Provider,{value:n},e.children)},c="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},d=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=u(r),d=a,y=c["".concat(s,".").concat(d)]||c[d]||g[d]||o;return r?t.createElement(y,i(i({ref:n},p),{},{components:r})):t.createElement(y,i({ref:n},p))}));function y(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[c]="string"==typeof e?e:a,i[1]=l;for(var u=2;u<o;u++)i[u]=r[u];return t.createElement.apply(null,i)}return t.createElement.apply(null,r)}d.displayName="MDXCreateElement"},8680:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>g,frontMatter:()=>o,metadata:()=>l,toc:()=>u});var t=r(8168),a=(r(6540),r(5680));const o={id:"docker",title:"Docker"},i=void 0,l={unversionedId:"install/docker",id:"install/docker",title:"Docker",description:"This page assumes that you have decided to start Unpoller with Docker using the command line.",source:"@site/docs/install/docker.md",sourceDirName:"install",slug:"/install/docker",permalink:"/docs/install/docker",draft:!1,tags:[],version:"current",frontMatter:{id:"docker",title:"Docker"},sidebar:"someSidebar",previous:{title:"Docker Compose",permalink:"/docs/install/dockercompose"},next:{title:"Kubernetes",permalink:"/docs/install/kubernetes"}},s={},u=[{value:"First",id:"first",level:2},{value:"Pull the Image",id:"pull-the-image",level:2},{value:"Container Configuration",id:"container-configuration",level:2},{value:"Using Environment Variables",id:"using-environment-variables",level:3},{value:"Using Configuration File",id:"using-configuration-file",level:3},{value:"Next Steps",id:"next-steps",level:2}],p={toc:u},c="wrapper";function g(e){let{components:n,...r}=e;return(0,a.yg)(c,(0,t.A)({},p,r,{components:n,mdxType:"MDXLayout"}),(0,a.yg)("p",null,"This page assumes that you have decided to start Unpoller with Docker using the command line."),(0,a.yg)("h2",{id:"first"},"First"),(0,a.yg)("p",null,"Make sure you have set up a user on your controller for Unpoller to poll. You must have\na working (and supported) version of ",(0,a.yg)("a",{parentName:"p",href:"../dependencies/grafana"},"Grafana")," and at\nleast one of ",(0,a.yg)("a",{parentName:"p",href:"../dependencies/influxDB"},"InfluxDB")," or ",(0,a.yg)("a",{parentName:"p",href:"../dependencies/prometheus"},"Prometheus"),".\nIf you don't have them, follow these instructions for installing\n",(0,a.yg)("a",{parentName:"p",href:"../dependencies/influxdb"},"InfluxDB")," and ",(0,a.yg)("a",{parentName:"p",href:"../dependencies/grafana"},"Grafana"),"."),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"pull-the-image"},"Pull the Image"),(0,a.yg)("p",null,"First pull the image from Docker Hub using"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"docker pull ghcr.io/unpoller/unpoller\n")),(0,a.yg)("admonition",{type:"info"},(0,a.yg)("p",{parentName:"admonition"},"Details of tags available are described in ",(0,a.yg)("a",{parentName:"p",href:"../help/docker_faq"},"Docker - FAQ"),".")),(0,a.yg)("h2",{id:"container-configuration"},"Container Configuration"),(0,a.yg)("p",null,"Unpoller's Docker container can be configured in two ways:"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},"Using environment variables."),(0,a.yg)("li",{parentName:"ol"},"Using a configuration file.")),(0,a.yg)("p",null,"There is a detailed description of the configuration parameters on the\n",(0,a.yg)("a",{parentName:"p",href:"../install/configuration"},"Application Configuration")," page.\nA decision should be made which method of configuration to use. Both are explained below."),(0,a.yg)("admonition",{type:"important"},(0,a.yg)("p",{parentName:"admonition"},"When configuring make sure that you do ",(0,a.yg)("strong",{parentName:"p"},"not")," include ",(0,a.yg)("inlineCode",{parentName:"p"},":8443")," on the url of the controller\nif you are using ",(0,a.yg)("inlineCode",{parentName:"p"},"unifios"),". Those are: UDM Pro, UDM, UXG, or CloudKey with recent firmware.")),(0,a.yg)("h3",{id:"using-environment-variables"},"Using Environment Variables"),(0,a.yg)("p",null,"If you are using the command line and have decided to use environment variables then start the\ncontainer using the following command (and pass in other environment variables you wish to)."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},'docker run -e UP_UNIFI_DEFAULT_PASS="your-secret-pasword"  ghcr.io/unpoller/unpoller:latest\n')),(0,a.yg)("h3",{id:"using-configuration-file"},"Using Configuration File"),(0,a.yg)("p",null,"If you choose to use a configuration file:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Copy this ",(0,a.yg)("a",{parentName:"li",href:"https://github.com/unpoller/unpoller/blob/master/examples/up.conf.example"},"example config file")),(0,a.yg)("li",{parentName:"ul"},"Edit it as necessary (in particular ensure that the ",(0,a.yg)("inlineCode",{parentName:"li"},"[unifi]"),"/",(0,a.yg)("inlineCode",{parentName:"li"},"user")," and ",(0,a.yg)("inlineCode",{parentName:"li"},"pass")," variables are set)"),(0,a.yg)("li",{parentName:"ul"},"Save it as ",(0,a.yg)("inlineCode",{parentName:"li"},"unpoller.conf")," in the local location you use for Docker storage.")),(0,a.yg)("p",null,"Start the container by running:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"docker run -v /your-local-location/unpoller.conf:/etc/unpoller/up.conf ghcr.io/unpoller/unpoller\n")),(0,a.yg)("admonition",{type:"note"},(0,a.yg)("p",{parentName:"admonition"},"Make sure that UniFi Poller is actively writing to the database before going any further.")),(0,a.yg)("p",null,"In both cases, if all has worked, then you should start seeing lines like this:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-none"},"[INFO] UniFi Metrics Recorded. Sites: 1, Clients: 67, UAP: 6, USG/UDM: 1, USW: 5, IDS Events: 0, Points: 1837, Fields: 11307, Errs: 0, Elapsed: 599ms\n")),(0,a.yg)("p",null,"If you don't see these lines then look for errors and double-check your work.\nIf you do then you can stop the container, and then start it again in daemon mode by adding the ",(0,a.yg)("inlineCode",{parentName:"p"},"-d")," flag."),(0,a.yg)("h2",{id:"next-steps"},"Next Steps"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},"Install ",(0,a.yg)("a",{parentName:"li",href:"/docs/dependencies/grafana"},"Grafana and Plugins"),"."),(0,a.yg)("li",{parentName:"ol"},"Finish ",(0,a.yg)("a",{parentName:"li",href:"../install/grafana"},"Setting-up Grafana"),".")))}g.isMDXComponent=!0}}]);