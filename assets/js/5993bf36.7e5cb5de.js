"use strict";(self.webpackChunkpollerdox=self.webpackChunkpollerdox||[]).push([[958],{3809:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"install/docker","title":"Docker","description":"This page assumes that you have decided to start Unpoller with Docker using the command line.","source":"@site/docs/install/docker.md","sourceDirName":"install","slug":"/install/docker","permalink":"/docs/install/docker","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"docker","title":"Docker"},"sidebar":"someSidebar","previous":{"title":"Docker Compose","permalink":"/docs/install/dockercompose"},"next":{"title":"Kubernetes","permalink":"/docs/install/kubernetes"}}');var o=i(4848),s=i(8453);const l={id:"docker",title:"Docker"},t=void 0,a={},c=[{value:"First",id:"first",level:2},{value:"Pull the Image",id:"pull-the-image",level:2},{value:"Container Configuration",id:"container-configuration",level:2},{value:"Using Environment Variables",id:"using-environment-variables",level:3},{value:"Using Configuration File",id:"using-configuration-file",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"This page assumes that you have decided to start Unpoller with Docker using the command line."}),"\n",(0,o.jsx)(n.h2,{id:"first",children:"First"}),"\n",(0,o.jsxs)(n.p,{children:["Make sure you have set up a user on your controller for Unpoller to poll. You must have\na working (and supported) version of ",(0,o.jsx)(n.a,{href:"../dependencies/grafana",children:"Grafana"})," and at\nleast one of ",(0,o.jsx)(n.a,{href:"../dependencies/influxdb",children:"InfluxDB"})," or ",(0,o.jsx)(n.a,{href:"../dependencies/prometheus",children:"Prometheus"}),".\nIf you don't have them, follow these instructions for installing\n",(0,o.jsx)(n.a,{href:"../dependencies/influxdb",children:"InfluxDB"})," and ",(0,o.jsx)(n.a,{href:"../dependencies/grafana",children:"Grafana"}),"."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"pull-the-image",children:"Pull the Image"}),"\n",(0,o.jsx)(n.p,{children:"First pull the image from Docker Hub using"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"docker pull ghcr.io/unpoller/unpoller\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["Details of tags available are described in ",(0,o.jsx)(n.a,{href:"../help/docker_faq",children:"Docker - FAQ"}),"."]})}),"\n",(0,o.jsx)(n.h2,{id:"container-configuration",children:"Container Configuration"}),"\n",(0,o.jsx)(n.p,{children:"Unpoller's Docker container can be configured in two ways:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Using environment variables."}),"\n",(0,o.jsx)(n.li,{children:"Using a configuration file."}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["There is a detailed description of the configuration parameters on the\n",(0,o.jsx)(n.a,{href:"../install/configuration",children:"Application Configuration"})," page.\nA decision should be made which method of configuration to use. Both are explained below."]}),"\n",(0,o.jsx)(n.admonition,{type:"important",children:(0,o.jsxs)(n.p,{children:["When configuring make sure that you do ",(0,o.jsx)(n.strong,{children:"not"})," include ",(0,o.jsx)(n.code,{children:":8443"})," on the url of the controller\nif you are using ",(0,o.jsx)(n.code,{children:"unifios"}),". Those are: UDM Pro, UDM, UXG, or CloudKey with recent firmware."]})}),"\n",(0,o.jsx)(n.h3,{id:"using-environment-variables",children:"Using Environment Variables"}),"\n",(0,o.jsx)(n.p,{children:"If you are using the command line and have decided to use environment variables then start the\ncontainer using the following command (and pass in other environment variables you wish to)."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:'docker run -e UP_UNIFI_DEFAULT_PASS="your-secret-pasword"  ghcr.io/unpoller/unpoller:latest\n'})}),"\n",(0,o.jsx)(n.h3,{id:"using-configuration-file",children:"Using Configuration File"}),"\n",(0,o.jsx)(n.p,{children:"If you choose to use a configuration file:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Copy this ",(0,o.jsx)(n.a,{href:"https://github.com/unpoller/unpoller/blob/master/examples/up.conf.example",children:"example config file"})]}),"\n",(0,o.jsxs)(n.li,{children:["Edit it as necessary (in particular ensure that the ",(0,o.jsx)(n.code,{children:"[unifi]"}),"/",(0,o.jsx)(n.code,{children:"user"})," and ",(0,o.jsx)(n.code,{children:"pass"})," variables are set)"]}),"\n",(0,o.jsxs)(n.li,{children:["Save it as ",(0,o.jsx)(n.code,{children:"unpoller.conf"})," in the local location you use for Docker storage."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Start the container by running:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"docker run -v /your-local-location/unpoller.conf:/etc/unpoller/up.conf ghcr.io/unpoller/unpoller\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"Make sure that UniFi Poller is actively writing to the database before going any further."})}),"\n",(0,o.jsx)(n.p,{children:"In both cases, if all has worked, then you should start seeing lines like this:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-none",children:"[INFO] UniFi Metrics Recorded. Sites: 1, Clients: 67, UAP: 6, USG/UDM: 1, USW: 5, IDS Events: 0, Points: 1837, Fields: 11307, Errs: 0, Elapsed: 599ms\n"})}),"\n",(0,o.jsxs)(n.p,{children:["If you don't see these lines then look for errors and double-check your work.\nIf you do then you can stop the container, and then start it again in daemon mode by adding the ",(0,o.jsx)(n.code,{children:"-d"})," flag."]}),"\n",(0,o.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Install ",(0,o.jsx)(n.a,{href:"/docs/dependencies/grafana",children:"Grafana and Plugins"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Finish ",(0,o.jsx)(n.a,{href:"../install/grafana",children:"Setting-up Grafana"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>t});var r=i(6540);const o={},s=r.createContext(o);function l(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);