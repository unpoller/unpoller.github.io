"use strict";(self.webpackChunkpollerdox=self.webpackChunkpollerdox||[]).push([[384],{3074:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>s,contentTitle:()=>o,default:()=>g,frontMatter:()=>l,metadata:()=>i,toc:()=>d});var n=t(8168),r=(t(6540),t(5680));const l={id:"grafana",title:"Setup Grafana"},o=void 0,i={unversionedId:"install/grafana",id:"install/grafana",title:"Setup Grafana",description:"This page assumes that you have successfully completed the installation of UniFi Poller,",source:"@site/docs/install/grafana.md",sourceDirName:"install",slug:"/install/grafana",permalink:"/docs/install/grafana",draft:!1,tags:[],version:"current",frontMatter:{id:"grafana",title:"Setup Grafana"},sidebar:"someSidebar",previous:{title:"Application Configuration",permalink:"/docs/install/configuration"},next:{title:"Grafana",permalink:"/docs/dependencies/grafana"}},s={},d=[{value:"Configure Datasource",id:"configure-datasource",level:2},{value:"Import Dashboards",id:"import-dashboards",level:2},{value:"Recommendations",id:"recommendations",level:3},{value:"Dashboard Installation Instructions",id:"dashboard-installation-instructions",level:3},{value:"Dashboard Update Notes",id:"dashboard-update-notes",level:4}],p={toc:d},u="wrapper";function g(e){let{components:a,...t}=e;return(0,r.yg)(u,(0,n.A)({},p,t,{components:a,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"This page assumes that you have successfully completed the installation of UniFi Poller,\n",(0,r.yg)("a",{parentName:"p",href:"../dependencies/grafana"},"Grafana")," and either ",(0,r.yg)("a",{parentName:"p",href:"../dependencies/influxdb"},"InfluxDB")," or\n",(0,r.yg)("a",{parentName:"p",href:"../dependencies/prometheus"},"Prometheus"),".\nThere are just a few remaining steps to complete the installation."),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"configure-datasource"},"Configure Datasource"),(0,r.yg)("p",null,"Grafana needs to be set up to use the database that Poller is writing to as a source.\nThe following explains the steps for InfluxDB; the Prometheus steps are very similar."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Click ",(0,r.yg)("inlineCode",{parentName:"li"},"Add your first data source")," on the home page you see after login."),(0,r.yg)("li",{parentName:"ul"},"Select the InfluxDB option"),(0,r.yg)("li",{parentName:"ul"},"Set the following fields:"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Name = ",(0,r.yg)("inlineCode",{parentName:"li"},"UniFi InfluxDB")," (or whatever name you want) and set to default"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"URL = ",(0,r.yg)("inlineCode",{parentName:"li"},"http://influxdb:8086")," or ",(0,r.yg)("inlineCode",{parentName:"li"},"http://localhost:8086")))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Database = ",(0,r.yg)("inlineCode",{parentName:"li"},"unpoller")))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Username = ",(0,r.yg)("inlineCode",{parentName:"li"},"unpoller")))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Password = ",(0,r.yg)("inlineCode",{parentName:"li"},"CHANGEME")," (or whatever you changed ",(0,r.yg)("inlineCode",{parentName:"li"},"INFLUXDB_ADMIN_PASSWORD")," to)"))),(0,r.yg)("li",{parentName:"ul"},'Under "Custom HTTP Headers" add an ',(0,r.yg)("inlineCode",{parentName:"li"},"Authorization")," header, with value ",(0,r.yg)("inlineCode",{parentName:"li"},"Token unpollersecret")," (optionally replace ",(0,r.yg)("inlineCode",{parentName:"li"},"unpollersecret")," with whatever you changed ",(0,r.yg)("inlineCode",{parentName:"li"},"INFLUXDB_ADMIN_TOKEN")," to)."),(0,r.yg)("li",{parentName:"ul"},"No other fields need to be changed or set on this page."),(0,r.yg)("li",{parentName:"ul"},"Click ",(0,r.yg)("inlineCode",{parentName:"li"},"Save & Test")),(0,r.yg)("li",{parentName:"ul"},"You should get green banner above the save and test that says 'Data Source is Working'"),(0,r.yg)("li",{parentName:"ul"},"To return to the homepage click the icon with 4 squares on the left nav-bar and select home")),(0,r.yg)("h2",{id:"import-dashboards"},"Import Dashboards"),(0,r.yg)("p",null,"This project provides a few pre-built Grafana dashboards.\nThey are available on ",(0,r.yg)("a",{parentName:"p",href:"https://grafana.com/grafana/dashboards?search=unifi-poller"},"Grafana.com"),"."),(0,r.yg)("p",null,"Keep in mind these dashboards are just examples. You should make a single dedicated folder in\nGrafana to keep all of them in, and copy the graphs to new dashboards that you want to maintain.\nFrom time to time we release new features that bring new benefits to the existing dashboards.\nWhen that happens they are updated. Keeping an example set allows you to update too, inspect\nthe changes, and apply them to your own custom dashboards."),(0,r.yg)("h3",{id:"recommendations"},"Recommendations"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Import the provided dashboards into their own folder, so they're easy to find.",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Do not make one folder per dashboard."),(0,r.yg)("li",{parentName:"ul"},"Make one folder for all of them."),(0,r.yg)("li",{parentName:"ul"},"The folder name cannot be the same as the dashboard names, or Grafana will throw an error."))),(0,r.yg)("li",{parentName:"ul"},"Changing the unique identifier allows you to re-import a dashboard, but this is not recommended."),(0,r.yg)("li",{parentName:"ul"},"Don't edit them, instead:",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Copy these dashboards or graphs to your own."),(0,r.yg)("li",{parentName:"ul"},"Edit the copies to get the data how you want it."),(0,r.yg)("li",{parentName:"ul"},"Keeping the original dashboards unedited allows you to continue referencing them,\nand copying graphs out of them."),(0,r.yg)("li",{parentName:"ul"},"This also allows you to identify problems with them and open an Issue.")))),(0,r.yg)("h3",{id:"dashboard-installation-instructions"},"Dashboard Installation Instructions"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Simply click the + on the left nav bar in Grafana and click Import."),(0,r.yg)("li",{parentName:"ul"},"Put in the ID for the dashboard (below) and click the blue Load button."),(0,r.yg)("li",{parentName:"ul"},"Select the InfluxDB or Prometheus data source you created previously."),(0,r.yg)("li",{parentName:"ul"},"Click the Green Import button on the last screen.")),(0,r.yg)("p",null,"Repeat this for each dashboard you want. The IDs for each database platform are below.\nYou only need Prometheus or Influx, not both. Unless you really want both."),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"App"),(0,r.yg)("th",{parentName:"tr",align:null},"Prometheus ID"),(0,r.yg)("th",{parentName:"tr",align:null},"Influx ID"),(0,r.yg)("th",{parentName:"tr",align:null},"Get this if you..."))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Client DPI"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://grafana.com/grafana/dashboards/11310"},"11310")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://grafana.com/grafana/dashboards/10419"},"10419")),(0,r.yg)("td",{parentName:"tr",align:null},"...enabled ",(0,r.yg)("inlineCode",{parentName:"td"},"save_dpi")," in the config")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Sites"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://grafana.com/grafana/dashboards/11311"},"11311")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://grafana.com/grafana/dashboards/10414"},"10414")),(0,r.yg)("td",{parentName:"tr",align:null},"...enabled ",(0,r.yg)("inlineCode",{parentName:"td"},"save_sites"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"USW"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://grafana.com/grafana/dashboards/11312"},"11312")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://grafana.com/grafana/dashboards/10417"},"10417")),(0,r.yg)("td",{parentName:"tr",align:null},"...have UniFi Switches")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"USG"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://grafana.com/grafana/dashboards/11313"},"11313")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://grafana.com/grafana/dashboards/10416"},"10416")),(0,r.yg)("td",{parentName:"tr",align:null},"...have a UniFi gateway (UDM-P, UDM, USG, ...)")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"UAP"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://grafana.com/grafana/dashboards/11314"},"11314")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://grafana.com/grafana/dashboards/10416"},"10415")),(0,r.yg)("td",{parentName:"tr",align:null},"...have UniFi Access Points")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Clients"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://grafana.com/grafana/dashboards/11315"},"11315")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://grafana.com/grafana/dashboards/10418"},"10418")),(0,r.yg)("td",{parentName:"tr",align:null},"..love nano")))),(0,r.yg)("h4",{id:"dashboard-update-notes"},"Dashboard Update Notes"),(0,r.yg)("p",null,"When the dashboards are updated, you have a couple options to update them in Grafana.\nYou can either import them and replace the existing ones (use the same unique identifier),\nor you can import them as fresh new dashboards by changing the unique identifier.\nThis allows you to keep updating the provided dashboards while maintaining your own.\nFrom time to time the dashboards get new features, new graphs, new variables, etc.\nGiving yourself an easy way to import the updated dashboards provided by this project is ideal.\nYou're able to inspect the changes and apply them to your dashboards with this method."),(0,r.yg)("hr",null),(0,r.yg)("h1",{id:"congratulations---you-are-now-done"},"CONGRATULATIONS - YOU ARE NOW DONE"))}g.isMDXComponent=!0},5680:(e,a,t)=>{t.d(a,{xA:()=>p,yg:()=>m});var n=t(6540);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function l(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?l(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function i(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=n.createContext({}),d=function(e){var a=n.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):o(o({},a),e)),t},p=function(e){var a=d(e.components);return n.createElement(s.Provider,{value:a},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},h=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=d(t),h=r,m=u["".concat(s,".").concat(h)]||u[h]||g[h]||l;return t?n.createElement(m,o(o({ref:a},p),{},{components:t})):n.createElement(m,o({ref:a},p))}));function m(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var l=t.length,o=new Array(l);o[0]=h;var i={};for(var s in a)hasOwnProperty.call(a,s)&&(i[s]=a[s]);i.originalType=e,i[u]="string"==typeof e?e:r,o[1]=i;for(var d=2;d<l;d++)o[d]=t[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}h.displayName="MDXCreateElement"}}]);