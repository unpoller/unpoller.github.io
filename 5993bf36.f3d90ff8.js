(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{106:function(e,n,t){"use strict";t.d(n,"a",(function(){return d})),t.d(n,"b",(function(){return m}));var a=t(0),i=t.n(a);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=i.a.createContext({}),p=function(e){var n=i.a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},d=function(e){var n=p(e.components);return i.a.createElement(s.Provider,{value:n},e.children)},b={inlineCode:"code",wrapper:function(e){var n=e.children;return i.a.createElement(i.a.Fragment,{},n)}},u=i.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),d=p(t),u=a,m=d["".concat(o,".").concat(u)]||d[u]||b[u]||r;return t?i.a.createElement(m,l(l({ref:n},s),{},{components:t})):i.a.createElement(m,l({ref:n},s))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,o=new Array(r);o[0]=u;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<r;s++)o[s]=t[s];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},81:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return l})),t.d(n,"toc",(function(){return c})),t.d(n,"default",(function(){return p}));var a=t(3),i=t(7),r=(t(0),t(106)),o={id:"docker",title:"Docker"},l={unversionedId:"install/docker",id:"install/docker",isDocsHomePage:!1,title:"Docker",description:"This page assumes that you have decided to start UniFi Poller with Docker using the command line.",source:"@site/docs/install/docker.md",slug:"/install/docker",permalink:"/docs/install/docker",version:"current",sidebar:"someSidebar",previous:{title:"Getting Started",permalink:"/docs/install/gettingstarted"},next:{title:"Docker Compose",permalink:"/docs/install/dockercompose"}},c=[{value:"First",id:"first",children:[]},{value:"Pull the Image",id:"pull-the-image",children:[]},{value:"Configuring and starting the container",id:"configuring-and-starting-the-container",children:[{value:"Alternative 1 - Using environment variables",id:"alternative-1---using-environment-variables",children:[]},{value:"Alternative 2 - Using a configuration file",id:"alternative-2---using-a-configuration-file",children:[]}]},{value:"Next steps",id:"next-steps",children:[]}],s={toc:c};function p(e){var n=e.components,t=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},s,t,{components:n,mdxType:"MDXLayout"}),Object(r.b)("p",null,"This page assumes that you have decided to start UniFi Poller with Docker using the command line."),Object(r.b)("h2",{id:"first"},"First"),Object(r.b)("p",null,"Make sure you have set up a user on your controller for UniFi Poller to poll. You must have\na working (and supported) version of ",Object(r.b)("a",{parentName:"p",href:"../dependencies/grafana"},"Grafana")," and at\nleast one of ",Object(r.b)("a",{parentName:"p",href:"../dependencies/influxDB"},"InfluxDB")," or ",Object(r.b)("a",{parentName:"p",href:"../dependencies/prometheus"},"Prometheus"),".\nIf you don't have then, follow these instructions for installing\n",Object(r.b)("a",{parentName:"p",href:"../dependencies/influxdb"},"InfluxDB")," and ",Object(r.b)("a",{parentName:"p",href:"../dependencies/grafana"},"Grafana"),"."),Object(r.b)("h2",{id:"pull-the-image"},"Pull the Image"),Object(r.b)("p",null,"First pull the image from Docker Hub using"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-shell"},"docker pull golift/unifi-poller\n")),Object(r.b)("div",{className:"admonition admonition-info alert alert--info"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"Details of tags available are described in ",Object(r.b)("a",{parentName:"p",href:"../install/docker_faq"},"Docker - FAQ"),"."))),Object(r.b)("h2",{id:"configuring-and-starting-the-container"},"Configuring and starting the container"),Object(r.b)("p",null,"A decision should be made which method of configuration to use.\nAll configuration options can be found on the ",Object(r.b)("a",{parentName:"p",href:"configuration"},"Application Configuration")," page."),Object(r.b)("div",{className:"admonition admonition-important alert alert--info"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"important")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"When configuring make sure that you do ",Object(r.b)("strong",{parentName:"p"},"not")," include ",Object(r.b)("inlineCode",{parentName:"p"},":8443")," on the url of the controller\nif you are using ",Object(r.b)("inlineCode",{parentName:"p"},"unifios"),". Those are: UDM Pro, UDM, or CkoudKey with recent firmware."))),Object(r.b)("h3",{id:"alternative-1---using-environment-variables"},"Alternative 1 - Using environment variables"),Object(r.b)("p",null,"If you are using the command line and have decided to use environment variables then start the\ncontainer using the following command (and pass in other environment variables you wish to)."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-shell"},'docker run -e UP_UNIFI_DEFAULT_PASS="your-secret-pasword"  golift/unifi-poller:latest\n')),Object(r.b)("h3",{id:"alternative-2---using-a-configuration-file"},"Alternative 2 - Using a configuration file"),Object(r.b)("p",null,"If you choose to use a configuration file:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Copy this ",Object(r.b)("a",{parentName:"li",href:"https://github.com/unifi-poller/unifi-poller/blob/master/examples/up.conf.example"},"example config file")),Object(r.b)("li",{parentName:"ul"},"Edit it as necessary (in particular ensure that the ",Object(r.b)("inlineCode",{parentName:"li"},"[unifi]"),"/",Object(r.b)("inlineCode",{parentName:"li"},"user")," and ",Object(r.b)("inlineCode",{parentName:"li"},"pass")," variables are set)"),Object(r.b)("li",{parentName:"ul"},"Save it as ",Object(r.b)("inlineCode",{parentName:"li"},"unifi-poller.conf")," in the local location you use for Docker storage.")),Object(r.b)("p",null,"Start the container by running:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-shell"},"docker run -v /your-local-location/unifi-poller.conf:/config/unifi-poller.conf golift/unifi-poller\n")),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"Make sure that UniFi Poller is actively writing to the database before going any further."))),Object(r.b)("p",null,"In both cases, if all has worked then you should start seeing lines like this:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-none"},"[INFO] UniFi Metrics Recorded. Sites: 1, Clients: 67, UAP: 6, USG/UDM: 1, USW: 5, IDS Events: 0, Points: 1837, Fields: 11307, Errs: 0, Elapsed: 599ms\n")),Object(r.b)("p",null,"If you don't see this then go back and check what you have done so far.\nIf you do then you can stop the container, and then start it again daemonised by adding the ",Object(r.b)("inlineCode",{parentName:"p"},"-d")," flag."),Object(r.b)("h2",{id:"next-steps"},"Next steps"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Install ",Object(r.b)("a",{parentName:"li",href:"/docs/dependencies/grafana"},"Grafana and Plugins"),"."),Object(r.b)("li",{parentName:"ol"},"Install ",Object(r.b)("a",{parentName:"li",href:"/docs/dependencies/influxdb"},"InfluxDB")," or ",Object(r.b)("a",{parentName:"li",href:"/docs/dependencies/prometheus"},"Prometheus"),"."),Object(r.b)("li",{parentName:"ol"},"Go to the section ",Object(r.b)("a",{parentName:"li",href:"../install/finish"},"Final Steps"),".")))}p.isMDXComponent=!0}}]);