(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{78:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return l})),t.d(n,"toc",(function(){return c})),t.d(n,"default",(function(){return u}));var a=t(3),r=t(7),i=(t(0),t(98)),o={id:"install_docker",title:"Docker - using command line"},l={unversionedId:"install_docker",id:"install_docker",isDocsHomePage:!1,title:"Docker - using command line",description:"This page assumes that you have decided to start UniFi Poller with Docker using the command line",source:"@site/docs/install_docker.md",slug:"/install_docker",permalink:"/docs/install_docker",version:"current",sidebar:"someSidebar",previous:{title:"Docker - using docker-compose",permalink:"/docs/install_dockercompose"},next:{title:"Docker - FAQs",permalink:"/docs/install_docker_faq"}},c=[{value:"Before this",id:"before-this",children:[]},{value:"Pull the images",id:"pull-the-images",children:[]},{value:"Configuring and starting the container",id:"configuring-and-starting-the-container",children:[{value:"Alternative 1 - Using environment variables",id:"alternative-1---using-environment-variables",children:[]},{value:"Alternative 2 - Using a configuration file",id:"alternative-2---using-a-configuration-file",children:[]}]},{value:"Grafana Plugins",id:"grafana-plugins",children:[]},{value:"Next steps",id:"next-steps",children:[]}],s={toc:c};function u(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},s,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("p",null,"This page assumes that you have decided to start UniFi Poller with Docker using the command line"),Object(i.b)("h2",{id:"before-this"},"Before this"),Object(i.b)("p",null,"Make sure you have set up a user on your controller for UniFi Poller to use"),Object(i.b)("p",null,"It is assumed that you have working (and supported) versions of Grafana (though see the Grafana plugins section below) and at least one of InfluxDB/Prometheus"),Object(i.b)("h2",{id:"pull-the-images"},"Pull the images"),Object(i.b)("p",null,"First pull the image from Docker Hub using"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"docker pull golift/unifi-poller\n")),Object(i.b)("p",null,"Details of tags available are described in ",Object(i.b)("a",{parentName:"p",href:"/docs/install_docker_faq"},"Docker - FAQs")," below."),Object(i.b)("h2",{id:"configuring-and-starting-the-container"},"Configuring and starting the container"),Object(i.b)("p",null,"See ",Object(i.b)("a",{parentName:"p",href:"/docs/configuration"},"Config file and Environment variables")),Object(i.b)("p",null,"A decision should be made which method of configuration to use."),Object(i.b)("h3",{id:"alternative-1---using-environment-variables"},"Alternative 1 - Using environment variables"),Object(i.b)("p",null,"If you are using the command line and have decided to use environment variables then start the container using the following command (changed as necessary to pass the other environment variables you wish to)"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},'docker run -e UP_UNIFI_DEFAULT_PASS="your-secret-pasword"  golift/unifi-poller:latest\n')),Object(i.b)("h3",{id:"alternative-2---using-a-configuration-file"},"Alternative 2 - Using a configuration file"),Object(i.b)("p",null,"If you choose to use a configuration file"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Copy this ",Object(i.b)("a",{parentName:"li",href:"https://github.com/unifi-poller/unifi-poller/blob/master/examples/up.conf.example"},"example config file")),Object(i.b)("li",{parentName:"ul"},"Edit it as necessary (in particular ensure that the ",Object(i.b)("inlineCode",{parentName:"li"},"[unifi]"),"/",Object(i.b)("inlineCode",{parentName:"li"},"user")," and ",Object(i.b)("inlineCode",{parentName:"li"},"pass")," variables are set)"),Object(i.b)("li",{parentName:"ul"},"Save it as ",Object(i.b)("inlineCode",{parentName:"li"},"unifi-poller.conf")," in the local location you use for Docker storage")),Object(i.b)("p",null,"Start the container using"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"docker run -v /your-local-location/unifi-poller.conf:/config/unifi-poller.conf golift/unifi-poller\n")),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"Make sure that UniFi Poller is actively writing to the database before going any further"))),Object(i.b)("p",null,"In both alternatives, if all has worked then you should start seeing lines like"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"unifi-poller    | 2020/06/18 12:08:50 [INFO] UniFi Metrics Recorded. Sites: 1, Clients: 67, UAP: 6, USG/UDM: 1, USW: 5, IDS Events: 0, Points: 1837, Fields: 11307, Errs: 0, Elapsed: 599ms\n")),Object(i.b)("p",null,"If you don't see this then go back and check what you have done so far"),Object(i.b)("p",null,"If you do then you can stop the container, and then start it again daemonised by adding the ",Object(i.b)("inlineCode",{parentName:"p"},"-d")," flag"),Object(i.b)("h2",{id:"grafana-plugins"},"Grafana Plugins"),Object(i.b)("p",null,"This application uses a few Grafana plugins. Install them:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"Clock, Discrete (InfluxDB only), PieChart, Singlestat (standard), Table (standard)\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"grafana-cli plugins install grafana-clock-panel\ngrafana-cli plugins install natel-discrete-panel\ngrafana-cli plugins install grafana-piechart-panel\n")),Object(i.b)("p",null,"If you're running Grafana in Docker, pass this environment variable/value to Grafana to install the plugins:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"GF_INSTALL_PLUGINS=grafana-clock-panel,natel-discrete-panel,grafana-piechart-panel\n")),Object(i.b)("h2",{id:"next-steps"},"Next steps"),Object(i.b)("p",null,"Go to the section ",Object(i.b)("a",{parentName:"p",href:"/docs/install_finish"},"Final steps")))}u.isMDXComponent=!0},98:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return f}));var a=t(0),r=t.n(a);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=r.a.createContext({}),u=function(e){var n=r.a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=u(e.components);return r.a.createElement(s.Provider,{value:n},e.children)},b={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},d=r.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=u(t),d=a,f=p["".concat(o,".").concat(d)]||p[d]||b[d]||i;return t?r.a.createElement(f,l(l({ref:n},s),{},{components:t})):r.a.createElement(f,l({ref:n},s))}));function f(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=d;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=t[s];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"}}]);